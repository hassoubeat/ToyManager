<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:jsf="http://xmlns.jcp.org/jsf"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <head jsf:id="head">
        <meta http-equiv="content-language" content="ja"/>
    </head>
    <body>
        <ui:composition template="/auth/template/template.xhtml">
            <ui:define name="content">
                <f:metadata>
                    <f:viewAction action="#{topBean.bookmarkable()}" onPostback="false"></f:viewAction>
                </f:metadata>
                <div class="row">
                    <div class="col-xs-3 toy-side-menu">
                        <ui:include src="/auth/template/toyMenu.xhtml"/>
                    </div>
                    <div class="col-xs-9">
                        <div class="jumbotron">
                            <div class="container">
                                <h2>ToyManagerへようこそ！</h2>
                                <p>イベントの編集、Toyのカスタマイズを行うことが出来ます。<br/>まずはサイドメニューから編集したいToyを選択してください！</p>
                            </div>
                        </div>
                        <div class="col-xs-6">
                            <div class="panel toy-menu-schedule" id="edit-schedule">
                                <div class="panel-body">
                                    <h2><span class="glyphicon glyphicon-calendar"/> イベントの編集</h2>
                                    <h3 class="small">Toyに喋らせるイベントの登録/変更/削除などを行うことが出来ます。</h3>
                                    <ui:fragment rendered="#{sessionBean.isToySelected()}">
                                        <a class="btn btn-primary" id="toy-menu-schedule" jsf:outcome="/auth/event/index" >予定を編集する</a>
                                    </ui:fragment>
                                    <ui:fragment rendered="#{!sessionBean.isToySelected()}">
                                        <span class="label label-danger">Toyが未選択です</span>
                                    </ui:fragment>
                                </div>
                            </div>
                        </div>
                        <div class="col-xs-6">
                            <div class="panel toy-menu-faset" id="edit-facet">
                                <div class="panel-body">
                                    <h2><span class="glyphicon glyphicon-wrench"/> Toyのカスタマイズ</h2>
                                    <h3 class="small">Toyにファセット(追加機能)を追加したり、音声を選択することなどが出来ます。</h3>
                                    <ui:fragment rendered="#{sessionBean.isToySelected()}">
                                        <a class="btn btn-primary" id="toy-menu-faset" jsf:outcome="/auth/toy/custom">Toyをカスタマイズする</a>
                                    </ui:fragment>
                                    <ui:fragment rendered="#{!sessionBean.isToySelected()}">
                                        <span class="label label-danger">Toyが未選択です</span>
                                    </ui:fragment>
                                </div>
                            </div>
                            
                        </div>
                        <div class="col-xs-6">
                            <div class="panel toy-menu-status" id="view-status">
                                <div class="panel-body">
                                    <h2><span class="glyphicon glyphicon-stats"/> Toyのステータス</h2>
                                    <h3 class="small">選択しているToyの情報を確認します。</h3>
                                    <ui:fragment rendered="#{sessionBean.isToySelected()}">
                                        <a class="btn btn-primary" id="toy-menu-status" jsf:outcome="/auth/toy/status">Toyのステータスを確認する</a>
                                    </ui:fragment>
                                    <ui:fragment rendered="#{!sessionBean.isToySelected()}">
                                        <span class="label label-danger">Toyが未選択です</span>
                                    </ui:fragment>
                                </div>
                            </div>
                        </div>
                        <ui:fragment rendered="#{sessionBean.isManagerRole()}">
                            <div class="col-xs-6">
                                <div class="panel toy-menu-management" id="view-status">
                                    <div class="panel-body">
                                        <h2><span class="glyphicon glyphicon-cog"/> ToyManager管理機能</h2>
                                        <h3 class="small">ToyManagerの管理機能にアクセスします。</h3>
                                        <a class="btn btn-primary" id="toy-menu-status" jsf:outcome="/auth/management/index">管理機能にアクセスする</a>
                                    </div>
                                </div>
                            </div>
                        </ui:fragment>
                    </div>
                </div>
                <!-- Toy未選択時の通知モーダルダイアログ -->
                <div class="modal fade" id="not-selected-toy-modal" tabindex="-1">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal"><span>×</span></button>
                                <h4 class="modal-title">Toyが未選択です。</h4>
                            </div>
                            <div class="modal-body">
                                <div class="bs-callout bs-callout-warning">
                                    <h4>画面右のToy一覧からToyを選択してください。</h4>
                                    <h5 class="small">登録されているToyが存在しない場合は、Toyの登録を行って下さい。</h5>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </ui:define>
            <ui:define name="css">
                <!-- jQueryUI CSS -->
                <link jsf:library="css" jsf:name="jquery-ui.css"/>
                <!-- jQueryToaster CSS -->
                <link jsf:library="css" jsf:name="jquery.toast.css"/>
            </ui:define>
            <ui:define name="js">
                <!-- jQueryUI JS -->
                <script jsf:library="js" jsf:name="jquery-ui.js"/>
                <!-- jQueryToaster JS -->
                <script jsf:library="js" jsf:name="jquery.toast.js"/>
                <script type="text/javascript">
                    $(window).load(function () {
                        // ナビゲーションバーのactiveを変更
                        $("#top").addClass("active");
                    });
                    
                    if(!#{sessionBean.isToySelected()}) {
                        // Toyが未選択だった場合、選択を促すダイアログを表示する
                        $("#not-selected-toy-modal").modal();
                    }
                </script>
            </ui:define>
        </ui:composition>        
    </body>
</html>

